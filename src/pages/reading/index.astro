---
import BaseLayout from '../../layouts/BaseLayout.astro';

const title = "Reading";
const description = "Books I've read by Steven Chang";

// define book structure
type Book = {
	title: string;
	author: string;
	url?: string;
	rating?: number; // 1-5 scale, only render if >= 4
};

type Section = {
	heading: string;
	books: Book[];
};

// manually curated list of books in chronological order
const sections: Section[] = [
	{
		heading: "Favorites",
		books: [
			{ title: "Deep Work", author: "Cal Newport", rating: 5 },
			{ title: "So Good They Can't Ignore You", author: "Cal Newport", rating: 5 },
			{ title: "Never Split the Difference", author: "Chris Voss", rating: 5 },
		]
	},
	{
		heading: "2025 (20 books read)",
		books: [
			{ title: "The Way of Kings", author: "Brandon Sanderson", rating: 5 },
			{ title: "Learning Go", author: "Jon Bodner", rating: 3 },
			{ title: "The Anatomy of the Swipe", author: "Ahmed Siddiqui", rating: 5 },
			{ title: "The Nvidia Way", author: "Tae Kim", rating: 5 },
			{ title: "When Breath Becomes Air", author: "Paul Kalanithi", rating: 4 },
			{ title: "The Happiness Hypothesis", author: "Jonathan Haidt", rating: 3 },
			{ title: "Bird by Bird", author: "Anne Lamott", rating: 4 },
			{ title: "Conversations on Love", author: "Natasha Lunn", rating: 4 },
			{ title: "Co-Intelligence", author: "Ethan Mollick", rating: 2 },
			{ title: "Thinking in Bets", author: "Annie Duke", url: "/reviews/thinking-in-bets", rating: 5 },
			{ title: "Before the Coffee Gets Cold", author: "Toshikazu Kawaguchi", rating: 3 },
			{ title: "When Things Fall Apart", author: "Pema Chodron", rating: 3 },
			{ title: "Man's Search for Meaning", author: "Victor Frankl", rating: 4 },
			{ title: "The Psychology of Money", author: "Morgan Housel", rating: 5 },
		]
	}
];
---

<BaseLayout title={title} description={description}>
	<h1>Reading</h1>
	<ul style="list-style: none; padding: 0;">
		{sections.map((section) => {
			const booksToDisplay = section.heading === "Favorites"
				? section.books
				: section.books.filter((book) => !book.rating || book.rating >= 4);

			return (
			<>
				<li style="margin-bottom: 1rem;">
					<span style="color: #9ca3af; font-size: 1.25rem; font-weight: normal;">{section.heading}</span>
				</li>
				<ul style="list-style-type: disc; margin-left: 0; margin-bottom: 1.5rem;">
					{booksToDisplay.map((book) => (
						<li style="margin-bottom: 0.5rem;">
							{book.url ? (
								<a href={book.url} style="font-size: 1.25rem; font-weight: 600;">
									{book.title}
								</a>
							) : (
								<span style="font-size: 1.25rem; font-weight: 600;">
									{book.title}
								</span>
							)}
							<span style="color: #9ca3af; font-size: 1.125rem;"> by {book.author}</span>
						</li>
					))}
				</ul>
			</>
			);
		})}
	</ul>
</BaseLayout>
